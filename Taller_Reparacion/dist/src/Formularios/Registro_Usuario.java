
package Formularios;
import DAL.Usuario;
import java.io.File;
import java.io.FileWriter;
import java.text.ParseException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author promo jhonny
 */
public class Registro_Usuario extends javax.swing.JFrame {

   DefaultTableModel Modelo;
   String CodUsuario;
   
    String Directorio_Usuario = new File("src/Archivo_Datos/Registro_UsuariosEmpleados.txt").getAbsolutePath();
    String Directorio_Empleados = new File("src/Archivo_Datos/Registro_Empleados.txt").getAbsolutePath();  
   
    public Registro_Usuario() {
        initComponents();
        
                 //Establecer un Nuevo Modelo de la Clase: DefaultTableModel
        Modelo = new DefaultTableModel()
        {
            //Crear Función para Bloquear la Edición de Celdas
            public boolean isCellEditable(int row, int column)
            {
            //Bloquear Edición
            return false;
            }
        };
        //Establecer Nombre de las Columnas para el Control: jTable_Vehiculos(A través de la variable: Modelo)
        Modelo.addColumn("Código de Empleado");
        Modelo.addColumn("Código de usuario");
        Modelo.addColumn("Password");
        Modelo.addColumn("Estado");

        //Establecer el Modelo al Control: jTableRegistro_Vehiculo
        this.JTable_Usuarios.setModel(Modelo);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        TXT_Cod_Usuario = new javax.swing.JTextField();
        TXT_Cod_Empleado = new javax.swing.JTextField();
        TXT_Password = new javax.swing.JTextField();
        TXT_Estado = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        JTable_Usuarios = new javax.swing.JTable();
        BTN_Guardar = new javax.swing.JButton();
        BTN_Editar = new javax.swing.JButton();
        BTN_Salir = new javax.swing.JButton();
        BTN_Nuevo = new javax.swing.JButton();
        BTNCancelar = new javax.swing.JButton();

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(jTable1);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));

        jLabel1.setText("Codigo de Empleado:");

        jLabel2.setText("Codigo de Usuario:");

        jLabel3.setText("Contrasena:");

        jLabel4.setText("Estado:");

        TXT_Password.setText("TXT_Password");

        TXT_Estado.setText("jTextField3");

        JTable_Usuarios.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        JTable_Usuarios.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                JTable_UsuariosMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(JTable_Usuarios);

        BTN_Guardar.setText("GUARDAR");
        BTN_Guardar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BTN_GuardarActionPerformed(evt);
            }
        });

        BTN_Editar.setText("Editar");
        BTN_Editar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BTN_EditarActionPerformed(evt);
            }
        });

        BTN_Salir.setText("Salir");
        BTN_Salir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BTN_SalirActionPerformed(evt);
            }
        });

        BTN_Nuevo.setText("NUEVO");
        BTN_Nuevo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BTN_NuevoActionPerformed(evt);
            }
        });

        BTNCancelar.setText("Cancelar");
        BTNCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                BTNCancelarActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(10, 10, 10)
                                .addComponent(jLabel1)
                                .addGap(10, 10, 10)
                                .addComponent(TXT_Cod_Usuario, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(30, 30, 30)
                                .addComponent(jLabel2)
                                .addGap(3, 3, 3)
                                .addComponent(TXT_Cod_Empleado, javax.swing.GroupLayout.PREFERRED_SIZE, 130, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(64, 64, 64)
                                .addComponent(jLabel3)
                                .addGap(8, 8, 8)
                                .addComponent(TXT_Password, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(87, 87, 87)
                                .addComponent(jLabel4)
                                .addGap(12, 12, 12)
                                .addComponent(TXT_Estado, javax.swing.GroupLayout.PREFERRED_SIZE, 101, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(110, 110, 110)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(BTN_Salir, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(BTN_Nuevo, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(BTN_Guardar, javax.swing.GroupLayout.DEFAULT_SIZE, 100, Short.MAX_VALUE)
                            .addComponent(BTN_Editar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(BTNCancelar, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(23, 23, 23)
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 467, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(30, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(14, 14, 14)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(jLabel1))
                            .addComponent(TXT_Cod_Usuario, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(6, 6, 6)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(6, 6, 6)
                                .addComponent(jLabel2))
                            .addComponent(TXT_Cod_Empleado, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(6, 6, 6)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(10, 10, 10)
                                .addComponent(jLabel3))
                            .addComponent(TXT_Password, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(11, 11, 11)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel4)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGap(1, 1, 1)
                                .addComponent(TXT_Estado, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(37, 37, 37)
                        .addComponent(BTN_Nuevo)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(BTN_Guardar)
                        .addGap(18, 18, 18)
                        .addComponent(BTN_Editar)
                        .addGap(18, 18, 18)
                        .addComponent(BTNCancelar)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(BTN_Salir)
                .addGap(21, 21, 21)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
void Limpiar()
{
    this.TXT_Cod_Usuario.setText("");
    this.TXT_Estado.setText("");
    this.TXT_Password.setText("");
    this.TXT_Cod_Empleado.setText("");
}

   void Leer_Datos()
{
    // 1. Crear una instancia de la clase Clientes con valores vacíos.
    // Esto sirve para inicializar el objeto y luego llamar a sus métodos.
    Usuario ObjUsuario = new Usuario("","","","");

    // 2. Llamar al método que carga los datos desde el archivo hacia una matriz
    ObjUsuario.Leer_Usuario(Directorio_Usuario);
     
    try
    {
        // 3. Recorrer la matriz de clientes cargada desde el archivo
        for (int i = 0; i < ObjUsuario.MatrizUsuario.length; i++)
        {
            // 4. (Opcional) Imprimir una línea vacía en consola
            System.out.println();
            
            // 5. Agregar cada fila de la matriz como una nueva fila al JTable
            Modelo.addRow(new Object[] {
                ObjUsuario.MatrizUsuario[i][0],  // 
                ObjUsuario.MatrizUsuario[i][1],  // 
                ObjUsuario.MatrizUsuario[i][2],  // 
                ObjUsuario.MatrizUsuario[i][3],  //

            });
        }

        // 6. Obtener el código del último cliente leído
        int Fila = ObjUsuario.MatrizUsuario.length;
        if (Fila > 0) {
            CodUsuario = ObjUsuario.MatrizUsuario[Fila - 1][1];  // Último código leído
        } else {
            CodUsuario = "FFM000";  // Si no hay datos, asignar código inicial
        }
    }
    catch (Exception Error)
    {
        // 7. En caso de error, asignar código base
        CodUsuario = "FFM000";
    }
}


    
    private void BTN_GuardarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BTN_GuardarActionPerformed

        this.Validar_Datos();

        this.Botones(true);

        this.Habilitar_Controles(false);

    }//GEN-LAST:event_BTN_GuardarActionPerformed

    private void BTN_EditarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BTN_EditarActionPerformed

        this.Habilitar_Controles(true);
        this.Botones(false);

        this.BTN_Guardar.setText("Actualizar");
    }//GEN-LAST:event_BTN_EditarActionPerformed

    private void BTN_SalirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BTN_SalirActionPerformed
        //Declarar variable de tipo: Entero
        int Rpta;
        //Mostrar Mensaje de Confirmacion
        Rpta = JOptionPane.showConfirmDialog(null,"¿Desea Salir de la Ventana?", "Registro de Vehiculo",
            JOptionPane. YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
        //'Evaluar Si se ha Pulsado el Botón: Si
        if (Rpta == 0)
        {
            //establecer el conjunto de filas o en el control.
            this.JTable_Usuarios.setRowSorter(null);
            //invocar el metodo guardar
            Guardar_Fichero();
            //Cerrar el Formulario
              dispose();
       
        //Mostrar Formulario Principal
                     Menu FormularioMenu = new Menu();
                     
                     //Mostrar Formulario al Centro de la Pantalla
                     FormularioMenu.setLocationRelativeTo(null);
                     
                     //Maximisar Ventana
                     FormularioMenu.setExtendedState(MAXIMIZED_BOTH);
                     
                     //Deshabilitar el Boton Cerrar de la Ventana
                     FormularioMenu.setDefaultCloseOperation(0);
                     
                     //Deshabilitar la Opcion Redimensionar el Tamaño de la Ventana
                     FormularioMenu.setResizable(false);
                     
                     //Mostrar formulario
                     FormularioMenu.setVisible(true);
        }
    }//GEN-LAST:event_BTN_SalirActionPerformed

    private void BTN_NuevoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BTN_NuevoActionPerformed
        // TODO add your handling code here:
        Limpiar();
        this.Botones(false);
        this.Habilitar_Controles(true);
        this.BTN_Guardar.setText("GUARDAR");
        this.TXT_Cod_Usuario.requestFocus();

    }//GEN-LAST:event_BTN_NuevoActionPerformed

    
    private void BTNCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_BTNCancelarActionPerformed
        this.BTN_Guardar.setText("Guardar");
        this.Limpiar();
        this.Habilitar_Controles(false);
        this.Botones(true);
    }//GEN-LAST:event_BTNCancelarActionPerformed

    private void formWindowOpened(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowOpened
     Limpiar();
     Leer_Datos();
    this.Botones(true);
    this.TXT_Cod_Usuario.setEditable(true);
    }//GEN-LAST:event_formWindowOpened

    private void JTable_UsuariosMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_JTable_UsuariosMouseClicked
            
       try {
           this.Cargar_Filas();
       } catch (ParseException ex) {
           Logger.getLogger(Registro_Usuario.class.getName()).log(Level.SEVERE, null, ex);
       }

    }//GEN-LAST:event_JTable_UsuariosMouseClicked

 void Cargar_Filas() throws ParseException
{
   

    // 1. Obtener el índice de la fila seleccionada en el JTable
    int Seleccion = this.JTable_Usuarios.getSelectedRow();
    
    // 2. Cargar los datos de cada celda de la fila seleccionada a los controles del formulario
    this.TXT_Cod_Usuario.setText(this.JTable_Usuarios.getValueAt(Seleccion, 0).toString()); // Código
    this.TXT_Cod_Empleado.setText(this.JTable_Usuarios.getValueAt(Seleccion, 1).toString()); // Apellidos
    this.TXT_Password.setText(this.JTable_Usuarios.getValueAt(Seleccion, 2).toString()); // Nombres
    this.TXT_Estado.setText(this.JTable_Usuarios.getValueAt(Seleccion, 3).toString());
}
 
    void Agregar_Registro()

{
    String [] InfoVehiculos = new String[4];
  
    InfoVehiculos[0]= this.TXT_Cod_Empleado.getText();
    InfoVehiculos[1]= this.TXT_Cod_Usuario.getText();   
    InfoVehiculos[2]= this.TXT_Password.getText();
    InfoVehiculos[3]= this.TXT_Estado.getText();

     
    //ingresar los datos a la tabla
    Modelo.addRow(InfoVehiculos);
    
    JOptionPane.showMessageDialog(null,"Registro Guardado con exito", this.getTitle(),
                                 JOptionPane.INFORMATION_MESSAGE);
    CodUsuario = InfoVehiculos[0];
    
    this.TXT_Cod_Empleado.requestFocus();
}    
    
    //Crear el Método: Modificar_Registro
void Modificar_Registro()
{
//Mostrar Mensaje de Confirmación
    int Rpta = JOptionPane.showConfirmDialog(null, "¿Esta seguro que Desea Modificar los Datos del Usuario?", "Confirmación ... " , JOptionPane. YES_NO_OPTION,
    JOptionPane.QUESTION_MESSAGE);

    //Evaluar si es la Respuesta es Afirmativa
    if (Rpta == JOptionPane. YES_OPTION)
    {
    //Obtener el Nº de la Fila Seleccionada
    int Fila = this.JTable_Usuarios.getSelectedRow();
    //Establecer Valores en el Control
    this.JTable_Usuarios.setValueAt(this.TXT_Cod_Usuario.getText(), Fila, 0);
    this.JTable_Usuarios.setValueAt(this.TXT_Cod_Empleado.getText(),Fila,1);
    this.JTable_Usuarios.setValueAt(this.TXT_Password.getText(),Fila,2);
    this.JTable_Usuarios.setValueAt(this.TXT_Estado.getText(),Fila,3);

}
}

//Crear el Método: Validar_Datos()

    void Validar_Datos()
{
    int Contador = 0;
    
    String Usuario="";
    
    //Evaluar si el Texto del Boton: BTN_Guardar es igual al Texto: GUARDAR
    if(this.BTN_Guardar.getText().toUpperCase().equals("GUARDAR"))
    {
          
     if (this.JTable_Usuarios.getRowCount() == 0)
     {
        Contador = 0;
     }
     else
     {
        //Recorrer los Elementos del Control JTable
        for (int i = 0; i < this.JTable_Usuarios.getRowCount(); i++)
        {
            //Capturar 
            Usuario = this.JTable_Usuarios.getValueAt(i, 1).toString(); // 1 Columna:  
            

             //MEvaluar si la Descripción del Producto Existe
            if (this.TXT_Cod_Usuario.getText().equals(Usuario))
            {
            //Mostrar Mensaje de Error
            JOptionPane.showMessageDialog(null, "El codigo de usuario: " + this.TXT_Cod_Usuario.getText() +", ya se encunetra registrado ",
                                          this.getTitle(), JOptionPane.ERROR_MESSAGE);

            this.BTN_Nuevo.requestFocus();

            Contador++;

            //fin de poroceso 
              break;
            }
        }
     }
  }
    
   if(this.BTN_Guardar.getText().toUpperCase().equals("ACTUALIZAR")) 
   {
       //obtenr eo numero de filas \
       int Fila = this.JTable_Usuarios.getSelectedRow();
       
       
       //Capturar la num dni
         Usuario = this.JTable_Usuarios.getValueAt(Fila,1).toString(); // 
                 
       //capturar la descripcion del producto
       if(this.TXT_Cod_Usuario.getText().equals(Usuario))
       {
                  Contador = 0; 
       }
       else
       {
         //Recorrer Elementos del Control: JTable
         for(int i = 0 ; i < this.JTable_Usuarios.getRowCount(); i++)
         {
             
             //Capturar la num dni
         Usuario = this.JTable_Usuarios.getValueAt(i,1).toString(); // 6 Columna: dni
         
         //Evaluar si la dni Existe
         if (this.TXT_Cod_Usuario.getText().equals(Usuario))
         {
             
             
         //Mostrar Mensaje de Error
         JOptionPane.showMessageDialog(null, "EL Codigo de usuario; " + this.TXT_Cod_Usuario.getText() + ", ya se encuentra Registrado",
         this.getTitle(), JOptionPane.ERROR_MESSAGE);
         
         //Ubicar Cursor en el Cursor
         this.TXT_Cod_Usuario.requestFocus();
         
         //incrementar el Valor de la variable: Contador
         Contador++; // Contador = Contador + 1;
         
         //Fin del Proceso
         break ;
         }
        }
       }
   }
   if(Contador == 0)
   {
       if(this.BTN_Guardar.getText().toUpperCase()=="GUARDAR")
       {
          Agregar_Registro();
       }
       else
       {
           Modificar_Registro();
       }
       
       
       this.Habilitar_Controles(false);
       
       //Establecer txt Guaragr en el  btn de nombre BTN_Guardar
       this.BTN_Guardar.setText("GUARDAR");
   }
}
    
    //Crear el Método Local: Habilitar_Controles()
void Habilitar_Controles (boolean Valor)
{
//Establecer Propiedad: Habilitar/Deshabilitar (true/false)
    this.TXT_Cod_Empleado.setEnabled(Valor);
    this.TXT_Cod_Empleado.setEnabled(Valor);
    this.TXT_Password.setEnabled(Valor);
    this.TXT_Estado.setEnabled(Valor);

}
    
void Botones(boolean valor)
{
    this.BTN_Nuevo.setEnabled(valor);
    this.BTN_Guardar.setEnabled(!valor);
    this.BTNCancelar.setEnabled(!valor);
    this.BTN_Editar.setEnabled(valor);
   // this.BTN_Eliminar.setEnabled(valor);
    this.BTN_Salir.setEnabled(valor);
 
}

void Guardar_Fichero()
{
//Crear Controlador de Errores
try
{
//Establecer Ruta del Archivo de Texto a Escribir la Secuencia de Datos
FileWriter Guardar = new FileWriter(Directorio_Usuario, false); 
//Recorrer Filas del Modelo de Datos del Control: jTable
for (int i=0; i < this.JTable_Usuarios.getRowCount(); i++)
{
 //Escribir la Secuencia de Datos
 Guardar.write(Modelo.getValueAt(i,0).toString()+"\n");//columna 0
 Guardar.write(Modelo.getValueAt(i,1).toString()+"\n");//columna 1
 Guardar.write(Modelo.getValueAt(i,2).toString()+"\n");//columna 2
 Guardar.write(Modelo.getValueAt(i,3).toString()+"\n");//columna 3


}
Guardar.close();
}
catch(Exception Error)
  {
      JOptionPane.showMessageDialog(null, "Error: AQUI TOYLINEA GUARADAR FICHEO "+ Error.getMessage(),this.getTitle(),JOptionPane.ERROR_MESSAGE);
  }
}  
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Registro_Usuario.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Registro_Usuario.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Registro_Usuario.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Registro_Usuario.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Registro_Usuario().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton BTNCancelar;
    private javax.swing.JButton BTN_Editar;
    private javax.swing.JButton BTN_Guardar;
    private javax.swing.JButton BTN_Nuevo;
    private javax.swing.JButton BTN_Salir;
    private javax.swing.JTable JTable_Usuarios;
    private javax.swing.JTextField TXT_Cod_Empleado;
    private javax.swing.JTextField TXT_Cod_Usuario;
    private javax.swing.JTextField TXT_Estado;
    private javax.swing.JTextField TXT_Password;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTable jTable1;
    // End of variables declaration//GEN-END:variables
}
